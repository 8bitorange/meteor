<head>
  <title>Tests</title>
</head>

<body>
  {{> test_table}}
</body>

<template name="test_table">
  <div class="test_table">
    {{#each data}}
      {{> test_group this}}
    {{/each}}
  </div>
</template>

<template name="test_group">
  <div class="group">
    <div class="groupname">{{name}}</div>
    {{#each tests}}
      {{> test}}
    {{/each}}
    {{#each groups}}
      {{> test_group}}
    {{/each}}
  </div>
</template>

<template name="test">
  <div class="test {{test_class}}">
    <div class="testrow">
      <div class="testname">
        {{name}}
      </div>
      <div class="teststatus">
        {{test_status_display}}
      </div>
      <div class="testtime">
        {{test_time_display}}
      </div>
    </div>
    {{#if expanded}}
      {{#each eventsArray}}
        {{> event}}
      {{else}}
        <div class="event"><div class="nodata">(no data)</div></div>
      {{/each}}
    {{/if}}
  </div>
</template>

<template name="event">
  <div class="event">
    <div class="{{type}}">
      - {{type}}
      {{#if times}}
        <span class="xtimes">({{times}} times)</span>
      {{/if}}
      {{#with get_details}}
        {{#if this}}
          -- {{this}}
        {{/if}}
      {{/with}}
      {{#if is_debuggable}}
        <span class="debug">[Debug]</span>
      {{/if}}
    </div>
  </div>
</template>
